<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BuBu & DuDu</title>
  <link rel="shortcut icon" href="./avatar.jpg" type="image/x-icon">
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.3/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="./src/style.css">
</head>

<body>


  <button class="togle" id="hide_form" >
    togle form
  </button>
  <button class="togle" id="hide_mess" >
    togle mess
  </button>
  
  <div class="container">
    <div id="echart"></div>
    
    <div class="container">
      <div class="row">
        <div class="col-4">
          <div class="card bg_opacity">
            <div class="card-row">
              <span class="label">Lựa chọn:</span>
              <h4 id="DOM_choice" class="value">1</h4>
            </div>
            <div class="card-row">
              <span class="label">Giá trị:</span>
              <h4 id="DOM_value" class="value">0</h4>
            </div>
            <div class="card-row">
              <span class="label">Điểm số:</span>
              <h4 id="DOM_bet" class="value">0</h4>
            </div>

            <div class="card-row">
              <span class="label">Tổng điểm:</span>
              <h4 id="DOM_gold" class="value">0</h4>
            </div>
          </div>


          <div id="form_controll" class="bg_opacity my-1">
            <div>
              <span id="valueDisplay">1000</span>
              <input id="slider" type="range" min="0" max="5000" value="1000" step="500" />
            </div>
            <div>
              <span id="addon-wrapping">Token</span>
              <input id="DOM_accessToken" type="text" value="" />
            </div>
            <div>
              <span>Target</span>
              <input id="DOM_target" type="text" value="300" />
            </div>
            <button id="DOM_isPlay">Play</button>
            <button id="DOM_isConnectGame">CnectH</button>
            <button id="DOM_connectPyserver">CnectP</button>
        
          </div>
        
          <div id="chat-container" class="bg_opacity">
          </div>
        </div>
        <div class="col-8">
          <div id="table-container"></div>
        </div>
      </div>
    </div>
  </div>
  <script>


    function handleTogle(element = form_controll){
      
      if (element.style.display === "none" ) {
    element.style.display = "block"; 
  } else {
    element.style.display = "none";
  }
    }

    
    function getCurrentTime() {
  const now = new Date();
  const hours = now.getHours().toString().padStart(2, '0');
  const minutes = now.getMinutes().toString().padStart(2, '0');
  const seconds = now.getSeconds().toString().padStart(2, '0');
  return `${hours}:${minutes}:${seconds}`;
}


function addMessage(content = "...", from = "player") {
  const chatBox = document.getElementById('chat-container');
  const msgDiv = document.createElement('div');
  msgDiv.className = `chat-message ${from}`;
  msgDiv.innerHTML = `<small>${getCurrentTime()}___${from}:</small> ${content}`;
  chatBox.appendChild(msgDiv);

  // 👇 Giới hạn chỉ giữ lại 10 tin nhắn mới nhất
  while (chatBox.children.length > 10) {
    chatBox.removeChild(chatBox.firstChild);
  }

  chatBox.scrollTop = chatBox.scrollHeight;
}

    hide_form.onclick = ()=>handleTogle();
    hide_mess.onclick = ()=>handleTogle(document.getElementById('chat-container'))


    function hideScrollbars() {
    document.documentElement.style.overflow = 'auto';
    document.body.style.overflow = 'auto';

    // Chrome, Safari
    document.documentElement.style.scrollbarWidth = 'none';
    document.body.style.scrollbarWidth = 'none';

    // IE, Edge
    document.documentElement.style.msOverflowStyle = 'none';
    document.body.style.msOverflowStyle = 'none';
  }

  // Gọi khi trang load
  document.addEventListener("DOMContentLoaded", hideScrollbars);

  // Gọi khi resize
  window.addEventListener("resize", hideScrollbars);

  // Gọi khi nội dung DOM thay đổi
  const observer = new MutationObserver(hideScrollbars);
  observer.observe(document.body, { childList: true, subtree: true });

  </script>
  <script src="./src/echart.js"></script>
  <script src="./src/main.js"></script>
  <script src="./src/remote.js"></script>

</body>

</html>